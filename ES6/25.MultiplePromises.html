<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    /*
     * @Author: qbenben 
     * @Date: 2019-07-11 14:09:02 
     * @Last Modified by: qbenben
     * @Last Modified time: 2019-07-11 15:46:08
     * 处理多个promise
     */
    const userPromise = new Promise((ressolve, reject) => {
      setTimeout(() => {
        ressolve(['mojombo', 'vanpelt', 'wycats']);
      }, 2000);
    });

    const moviePromise = new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve({ name: '摔跤吧爸爸', rating: 2, year: 2016 });
      }, 500);
    });


    // .all()  方法同时发起两个 参数传入数组
    //需要注意的是 这个类似于every方法，如果当中有一个是reject则不会执行then
    /*  Promise.all([userPromise, moviePromise])
       .then(response => {
         console.log(response);
         //数组解构
         const [users, movie] = response;
         console.log(users);
         console.log(movie);
       }) */

    //.race() 类型与all方法，但是有一点不一样的是，如果当中第一个是reject则不会执行then
    Promise.race([userPromise, moviePromise])
      .then(response => {
        console.log(response);
      })
      .catch(err => {
        console.error(err)
      })
  </script>
</body>

</html>