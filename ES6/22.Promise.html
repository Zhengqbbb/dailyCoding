<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script src="http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    /*
     * @Author: qbenben 
     * @Date: 2019-07-10 18:10:16 
     * @Last Modified by: qbenben
     * @Last Modified time: 2019-07-10 18:35:42
     * Promise 简介
     */

    //promise的出现
    let username;
    //下面我发起了两个ajax请求
    //fetch all users
/*     $.get('http://api.github.com/users', data => {
      console.log('fetch all users');
      user = data[0].login;
      //fetch the first user's repos
      $.get(`https://api.github.com/users/${user}/repos`, data => {
        console.log('fetched user repos');
        console.log(data)
      });
    }); */

    const usersPromise = axios.get('http://api.github.com/users');

    usersPromise
    .then(reponse =>{
      username = reponse.data[0].login;
      return axios.get(`https://api.github.com/users/${username}/repos`)
    })
    .then(reponse => {
      console.log(reponse.data);
    })
    .catch((err) => {
      console.err(err)
    })//监听错误
  </script>

</body>

</html>